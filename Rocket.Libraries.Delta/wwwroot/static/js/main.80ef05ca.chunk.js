(this["webpackJsonprocket-gundi"]=this["webpackJsonprocket-gundi"]||[]).push([[0],{36:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var r,a=n(0),c=n.n(a),s=n(15),i=n.n(s),o=(n(36),n(11)),u=n(4),p=n(1);function h(t){var e,n=Object(a.useState)({path:"/"}),c=Object(o.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(),h=Object(o.a)(u,2),l=h[0],f=h[1],d=function(){i({path:window.location.pathname})};Object(a.useEffect)((function(){return window.basicRouter.push=function(t){t.path=t.path.toLocaleLowerCase(),i(t)},r=d,window.addEventListener("popstate",r),function(){window.basicRouter.push=function(t){console.error("BasicRouter push was disposed")},window.removeEventListener("popstate",r)}})),Object(a.useEffect)((function(){window.history.pushState(s.data,"",s.path),f(s)}),[s.path,s.data,s]);var b=null!==(e=t.routes.find((function(t){return t.path.toLocaleLowerCase()===s.path})))&&void 0!==e?e:{path:"/404",component:t.badRouteComponent};return l===s?Object(p.jsx)("div",{children:b.component},null===l||void 0===l?void 0:l.path):Object(p.jsx)(p.Fragment,{children:"..."})}window.basicRouter=window.basicRouter||new function t(){Object(u.a)(this,t),this.push=function(t){return console.error("Push not yet initialized")}};var l=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},f=(n(38),n(2)),d=n.n(f),b=n(6),j=n(5),v=n(8),y=n(7),g=n(13),O=function t(){Object(u.a)(this,t),this.host="http://localhost:5002/"},w=function(t){var e=new O;return encodeURI("".concat(e.host,"api/").concat(t))},x=function(){function t(){Object(u.a)(this,t)}return Object(j.a)(t,[{key:"getAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.callAsync(e,"GET");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"postAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.callAsync(e,"POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"callAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e,n,r){var a,c,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=w(e),c=new AbortController,s={method:n,signal:c.signal,headers:{Accept:"application/json","Accept-Encoding":"gzip","Content-Type":"application/json;charset=UTF-8"},body:r?JSON.stringify(r):void 0},setTimeout((function(){return c.abort()}),3e5),t.next=6,fetch(a,s);case 6:if(!(i=t.sent).ok){t.next=11;break}return t.abrupt("return",i);case 11:throw new Error("Error calling api '".concat(a,"'\n HTTP Status Code: '").concat(i.status,"' Status Text '").concat(i.statusText,"'"));case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),m=function(){function t(){Object(u.a)(this,t)}return Object(j.a)(t,[{key:"getAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new x,t.next=3,n.getAsync(e);case 3:return r=t.sent,t.next=6,this.extractPayloadAsync(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"postAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e,n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new x,t.next=3,r.postAsync(e,n);case 3:return a=t.sent,t.next=6,this.extractPayloadAsync(a);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"extractPayloadAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=1,t.next=3,e.json();case 3:if((r=t.sent).code!==n){t.next=8;break}return t.abrupt("return",r.payload);case 8:throw new Error("API call error: "+r.message);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),k=function(){function t(){Object(u.a)(this,t),this.apiVersion="v1"}return Object(j.a)(t,[{key:"wrappedResponseApiCaller",get:function(){return new m}},{key:"getRelativeUrl",value:function(t){return"".concat(this.apiVersion,"/").concat(this.basePath,"/").concat(t)}},{key:"getAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.wrappedResponseApiCaller.getAsync(this.getRelativeUrl(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"postAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.wrappedResponseApiCaller.postAsync(this.getRelativeUrl(e),n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),A={zero:0,one:1,negativeOne:-1,strings:{firstElementIndex:0},arrays:{emptyArrayLength:0,firstElementIndex:0},paging:{nextIncrementAmount:1,lastDecrementAmount:-1},zIndexes:{actionBar:2,menuDropDown:function(){return A.zIndexes.actionBar+A.one},mobileTopBar:function(){return A.zIndexes.menuDropDown()+A.one}},defaultGuid:"00000000-0000-0000-0000-000000000000"},R=A,S=n(25),D=function(){function t(e,n,r,a){var c=this;Object(u.a)(this,t),this.maximumPageSize=65535,this.pageSize=this.maximumPageSize,this.hasMorePages=!0,this.page=R.one,this.dataset=void 0,this.pageableEndpoint=void 0,this.searchEndpoint="search",this.applyPagingToSearches=!0,this.debouncingSearcher=void 0,this.searchDebounceMilliseconds=500,this.searchText="",this.page=null!==r&&void 0!==r?r:this.page,this.pageSize=null!==a&&void 0!==a?a:this.pageSize,this.dataset=e,this.pageableEndpoint=null!==n&&void 0!==n?n:"get-pageable",this.debouncingSearcher=Object(S.a)(this.searchDebounceMilliseconds,!1,function(){var t=Object(b.a)(d.a.mark((function t(e,n,r,a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e()){t.next=7;break}return c.hasMorePages=!1,t.next=4,n();case 4:a(c.dataset),t.next=12;break;case 7:c.hasMorePages=!0,a([]),c.replaceData([]),c.page=R.one,r();case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}())}return Object(j.a)(t,[{key:"replaceData",value:function(t){this.dataset.splice(R.zero,this.dataset.length);for(var e=0;e<t.length;e++)this.dataset.push(t[e])}},{key:"search",value:function(t,e,n,r){var a=this;this.searchText=t,this.debouncingSearcher((function(){return a.searchText}),e,n,r)}},{key:"appendData",value:function(t){if(t&&Array.isArray(t)){this.hasMorePages=t.length===this.pageSize,this.page+=1;for(var e=0;e<t.length;e++)this.dataset.push(t[e])}}}]),t}(),P=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"getPaged",value:function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOptionallyPaged(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"searchAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){var n,r,a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null!==(n=e.searchEndpoint)&&void 0!==n?n:"search",e=null!==(r=e)&&void 0!==r?r:new D([]),c="".concat(a,"?searchText=").concat(e.searchText),e.applyPagingToSearches&&(c+="&page=".concat(e.page,"&pageSize=").concat(e.pageSize)),t.next=6,this.getAsync(c);case 6:return s=t.sent,e.replaceData(s),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getOptionallyPaged",value:function(){var t=Object(b.a)(d.a.mark((function t(e){var n,r,a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e||e.hasMorePages)){t.next=11;break}return c=null!==(n=null===(r=e)||void 0===r?void 0:r.pageableEndpoint)&&void 0!==n?n:"get-pageable",e=null!==(a=e)&&void 0!==a?a:new D([]),t.next=6,this.getAsync("".concat(c,"?page=").concat(e.page,"&pageSize=").concat(e.pageSize));case 6:return s=t.sent,e.appendData(s),t.abrupt("return",s);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"insertAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.postAsync("insert",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(k),T=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).basePath="ProjectDefinitions",t}return n}(P),E=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).basePath="Run",t}return Object(j.a)(n,[{key:"runByIdAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAsync("run-by-id?projectId=".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(P),C=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).dataAdapter=new D([],"get-all"),t}return Object(j.a)(n,[{key:"fetchProjectDefinitionsAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(){var e,n=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runAsync({fn:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new T).getOptionallyPaged(n.dataAdapter);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 2:e=t.sent,this.potter.pushToRepository({projectDefinitions:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"runProjectAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runAsync({fn:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new E).runByIdAsync(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 2:t.sent?this.potter.pushToRepository({message:"Completed successfully"}):this.potter.pushToRepository({message:"Unable to complete running of project"});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(g.c),z=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).projectDefinitions=[],t.message="",t}return n}(g.d),I=n(45),B=n(47),F=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"onRender",value:function(){return Object(p.jsx)(I.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0,children:Object(p.jsxs)("thead",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"#"}),Object(p.jsx)("th",{children:"Project"}),Object(p.jsx)("th",{children:"Action"})]}),this.repository.projectDefinitions.map((function(t,e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e+1}),Object(p.jsx)("td",{children:t.label}),Object(p.jsx)("td",{children:Object(p.jsx)(B.a,{onClick:function(){window.basicRouter.push({path:"/project",data:t})},children:"Run"})})]},e)}))]})})}}]),n}(g.a),L=n(46),M=n(48);function U(t){return Object(p.jsx)(L.a,{show:t.show,children:Object(p.jsx)(M.a,{animated:!0,now:100})})}var J=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){return Object(u.a)(this,n),e.call(this,new z,{},new C)}return Object(j.a)(n,[{key:"message",value:function(){var t=this;return Object(p.jsxs)(L.a,{show:!!this.repository.message,onHide:function(){return t.potter.pushToRepository({message:""})},children:[Object(p.jsx)(L.a.Body,{children:this.repository.message}),Object(p.jsx)(L.a.Footer,{children:Object(p.jsx)(B.a,{variant:"secondary",onClick:function(){return t.potter.pushToRepository({message:""})},children:"Close"})})]})}},{key:"componentDidMount",value:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.logic.fetchProjectDefinitionsAsync();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onRender",value:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(U,{show:this.repository.busy}),Object(p.jsx)(F,{potter:this.potter},this.getChildKeyFromObject(this.repository.projectDefinitions))]})}},{key:"onStartedAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),n}(g.b);var V=function t(e){var n=this;Object(u.a)(this,t),this.eventSource=void 0,this.eventSource=new EventSource(e.url),this.eventSource.onmessage=function(t){"---terminate---"===t.data&&n.eventSource?(n.eventSource.close(),n.eventSource.onmessage=null,e.onCompleted()):e.onData(t.data)}},G=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).isRunning=!1,t}return Object(j.a)(n,[{key:"projectDefinition",get:function(){return window.history.state}},{key:"runProjectAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isRunning){t.next=3;break}return t.abrupt("return");case 3:return this.potter.pushToRepository({busy:!0}),this.handleEventListening(),this.isRunning=!0,t.next=8,(new E).runByIdAsync(this.projectDefinition.projectId);case 8:e=t.sent,this.potter.pushToRepository({processRunningResult:e}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),n={errors:["Error occured on server"]},this.potter.pushToRepository({processRunningResult:[n]});case 17:return t.prev=17,this.isRunning=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[0,12,17,20]])})));return function(){return t.apply(this,arguments)}}()},{key:"scrollToBottom",value:function(){var t=document.getElementById("gundi-output");t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}},{key:"handleEventListening",value:function(){var t=this;new V({url:"".concat((new O).host,"api/v1/EventQueue/listen?projectId=").concat(this.projectDefinition.projectId),onData:function(e){t.context.repository.output.push(e),t.potter.pushToRepository({}),t.scrollToBottom()},onCompleted:function(){t.potter.pushToRepository({busy:!1}),t.scrollToBottom()}})}}]),n}(g.c),H=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).processRunningResult=[],t.output=[],t}return n}(g.d);function N(t){return document.title=t.title,Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(U,{show:t.busy}),t.children]})}var K={header:{fontSize:"25px",fontWeight:"bold"}},Q=function(t){Object(v.a)(n,t);var e=Object(y.a)(n);function n(){return Object(u.a)(this,n),e.call(this,new H,{},new G)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.logic.runProjectAsync();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onRender",value:function(){return Object(p.jsxs)(N,{title:this.logic.projectDefinition.label,busy:this.repository.busy,children:[Object(p.jsx)("div",{style:K.header,children:this.logic.projectDefinition.label}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{id:"gundi-output",style:{overflow:"scroll",border:"solid 1px #DFDFDF"},children:Object(p.jsx)("ol",{children:this.repository.output.map((function(t,e){return Object(p.jsx)("li",{children:t},e)}))})})]})}},{key:"onStartedAsync",value:function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),n}(g.b);i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(h,{routes:[{path:"/",component:Object(p.jsx)(J,{})},{path:"/project",component:Object(p.jsx)(Q,{})}],badRouteComponent:Object(p.jsx)("div",{children:"Nothing here"})})}),document.getElementById("root")),l()}},[[43,1,2]]]);
//# sourceMappingURL=main.80ef05ca.chunk.js.map